<!DOCTYPE html>
<html lang="en">
<%- include('partials/header', { title: "Home" }) %>
<%- include('partials/sidebar') %>
<div class="add-place-card">
    <h2>Add a New Place</h2>
    <form action="/add-place" method="POST">
        <input type="text" name="name" placeholder="Place name" required>
        <input type="text" name="location" placeholder="Location" required>
        <button type="submit">Add</button>
    </form>
</div>
<div class="grid">
    <% places.forEach(place => { %>
        <div class="card">
            <a href="/place/<%= place._id %>">
                <div class="card-content">
                    <h2><%= place.name %></h2>
                    <p><%= place.location %></p>
                    <% if (typeof place.avgRating !== 'undefined' && place.avgRating !== null) { %>
                        <p>Average Rating: <%= place.avgRating %> / 5
                            <span style="color: gold;">
                                <% for (let i = 1; i <= 5; i++) { %>
                                    <% if (i <= Math.round(place.avgRating)) { %>★<% } else { %>☆<% } %>
                                <% } %>
                            </span>
                        </p>
                    <% } %>
                </div>
            </a>
        </div>
    <% }); %>
</div>
<%- include('partials/footer') %>
</html>
